#
# Makefile for nsmb4.4 utilities program under IPM
# (c) Eric Sevault, Vincent Van Kemenade (CERFACS)
#     Jan B. Vos (LMF/EPFL)
#
# This makefile should be Ok for these computers:
#
#       RS6K : IBM RS6000, IBM SP2
#       SUN4 : Sparc workstation
#       SGI  : Silicon Graphics/Origin 2000
#       HPPA : HP-9000 700 series
#       SX8  : NEC SX8
#       IFC8 : Intel IFC compiler
#       LINUX: PC under LINUX

#######################################################################
#  Begining of customized section
#
NSMBDIR   = /home/hpc/t7841/di34pip2/nsmb6.08.09.231014
include $(NSMBDIR)/Install/nsmb.common
#
#
CLEAN     = yes
#
# for MEMCOM 6.5, use  -I$(MEMCOM)/include
# for MEMCOM 6.6, use  -I$(MEMCOM)/include/$(MCARCH)
# for MEMCOM 6.61, use -I$(MEMCOM)/include/memcom6
# for MEMCOM 7.0, use  -I$(MEMCOM)/include
# 
DEFS      = -DUTIL -DIJK -DMC7 -I$(MEMCOM)/include  -DCGNS   
PWD       = $(NSMBDIR)/UTIL
#
# End of customized section
#######################################################################
#
LIBICEMD  = 
LIBICEMT  = 
LIBNSMB   = $(NSMBDIR)/lib/$(IPM_ARCH)/libnsmb${NSMBVER}.a
#
# cgns lib
#
#LIBCGNS  = $(CGNS)/lib/libcgns.a /home/hoarau/APPLIS/CGNS/cgnslib_2.5/LINUX/libcgns.a /usr/lib64/libhdf5.so
LIBCGNS = /home/hpc/t7841/di34pip2/cgnslib_3.1.3/lib/libcgns.a /home/hpc/t7841/di34pip2/cgnslib_3.1.3/lib/libcgns.so
#
# for MEMCOM 6.61 use $(MEMCOM)/lib/libmemcom6.a
# for MEMCOM 7.0  use $(MEMCOM)/lib/libmemcomf.a $(MEMCOM)/lib/libmemcom.a
#
LIBMEM = $(MEMCOM)/lib/libmemcomf.a $(MEMCOM)/lib/libmemcom.a
#
# ICEMCFD libraries are only used when -DICEM is specified in the
# DEFS of this makefile
#
LIBICEMD  = /home/hpc/t7841/di34pip2/output-interfaces/lib/domainlib.a
LIBICEMT  = /home/hpc/t7841/di34pip2/output-interfaces/lib/topolib.a
LIBICEMB  = /home/hpc/t7841/di34pip2/output-interfaces/lib/bocolib.a
#
# Libraries
#
LIBS = $(LIBNSMB) $(LIBMEM) $(OLIBS)
#
MAINO = 
#
NSMBO = 
#
FLAGS = $(FFLAGS) -I$(MPI_HOME)/include -I$(INCLUDE)
#
#util : 
#	make "PWD=$(PWD)" listes mpi_dummy
#	make all
#
all : post_script post_script_2 auto_tauw post_script_vokeloc

post_script: post_script.o $(NSMBO)
	$(F77) $(LFLAGS) -o $@ $@.o $(NSMBO) mpi_dummy.o $(LIBS)
	chmod og+rx $@

post_script_2: post_script_2.o $(NSMBO)
	$(F77) $(LFLAGS) -o $@ $@.o $(NSMBO) mpi_dummy.o $(LIBS)
	chmod og+rx $@
auto_tauw:  auto_tauw.o $(NSMBO)
	mpif90 $(LFLAGS) -o $@ $@.o $(NSMBO) mpi_dummy.o $(LIBS)
	chmod og+rx $@
auto_tauw.o: auto_tauw.f90
	mpif90 -c auto_tauw.f90
post_script_vokeloc: post_script_vokeloc.o $(NSMBO)
	$(F77) $(LFLAGS) -o $@ $@.o $(NSMBO) mpi_dummy.o $(LIBS)
	chmod og+rx $@
